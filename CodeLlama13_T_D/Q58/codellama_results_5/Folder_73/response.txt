```python
import numpy as np

def submatrix_with_n_numbers(matrix, n):
    # Initialize a counter for the number of submatrices found
    count = 0
    
    # Loop through each row and column of the matrix
    for i in range(matrix.shape[0]):
        for j in range(matrix.shape[1]):
            # Check if the current cell is equal to n
            if matrix[i, j] == n:
                # If it is, check if there are 4 submatrices with a size of 3x3 that contain the current cell
                for k in range(i-1, i+2):
                    for l in range(j-1, j+2):
                        # Check if the current submatrix contains only cells that are equal to n
                        if all(matrix[k, l] == n) and (k, l) != (i, j):
                            count += 1
    
    return count
```